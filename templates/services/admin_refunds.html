{% extends "base.html" %}
{% block title %}Возвраты{% endblock %}
{% block container %}
<div class="page-card" style="max-width:1100px;">
  <h2 class="page-title">Заявки на возврат</h2>

  {% if tickets %}
    <table style="width:100%; border-collapse:collapse;">
      <thead>
        <tr style="text-align:left; font-size:13px; opacity:.8;">
          <th style="padding:8px 6px;">Билет</th>
          <th style="padding:8px 6px;">Пользователь</th>
          <th style="padding:8px 6px;">Событие</th>
          <th style="padding:8px 6px;">Цена</th>
          <th style="padding:8px 6px;">Действия</th>
        </tr>
      </thead>
      <tbody>
        {% for t in tickets %}
        <tr style="border-top:1px solid rgba(0,0,0,.08);">
          <td style="padding:8px 6px;">#{{ t.id }}</td>
          <td style="padding:8px 6px;">{{ t.user.email }} / {{ t.user.phone_number }}</td>
          <td style="padding:8px 6px;">{{ t.event.title }}</td>
          <td style="padding:8px 6px;">{{ t.price }}</td>
          <td style="padding:8px 6px;">
            <form method="post" action="{% url 'admin_refund_approve' t.id %}" style="display:inline;">
              {% csrf_token %}
              <button style="padding:6px 10px; border:none; border-radius:6px; background:#28a745; color:#fff; cursor:pointer;">
                Approve
              </button>
            </form>

            <form method="post" action="{% url 'admin_refund_reject' t.id %}" style="display:inline; margin-left:6px;">
              {% csrf_token %}
              <button style="padding:6px 10px; border:none; border-radius:6px; background:#dc3545; color:#fff; cursor:pointer;">
                Reject
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div style="opacity:.75;">Пока нет заявок.</div>
  {% endif %}
</div>
{% endblock %}
